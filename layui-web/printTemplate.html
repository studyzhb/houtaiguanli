<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>标题</title>
  <meta name="keywords" content="">
  <meta name="description" content="">
  <link rel="stylesheet" href="./layui/css/layui.css" />
  <link rel="stylesheet" href="./css/print.css" />
  <script src="./layui/layui.js"></script>
    <script type="text/javascript" src="./js/jquery-2.2.3.min.js"></script>
    <script type="text/javascript" src="./js/jquery-form.js"></script>
    <script src="./js/config.js"></script>

</head>
<body>
  <div><input type="button" value="打印" onclick="Print()" /></div>  

  <div id="page2">
  <div>
    <header>
    <h3 class="title">万店联盟采购单</h3>
  </header>
  <section>
    <div class="thumbInfo">
      <div class="infoWrap">
        操作员：测试
      </div>
      <div class="infoWrap">
        单号：000001
      </div>
    </div>
    <table class="layui-table">
  <colgroup>
    
  </colgroup>
  <thead>
    <tr>
      <th>序号</th>
      <th>商品条码</th>
      <th>商品名称</th>
      <th>零售单位</th>
      <th>供应商</th>
      <th>单价</th>
      <th>数量</th>
      <th>总价</th>
    </tr> 
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>000001</td>
      <td>测试商品</td>
      <td>20ml/g</td>
      <td>测试供应商</td>
      <td>10.00</td>
      <td>10</td>
      <td>100.00</td>
    </tr>
    
  </tbody>
  <tfoot>
    <tr>
      <td colspan="9">合计：<span class="printdposit"></span></td>
    </tr>
  </tfoot>
</table>
  </section>
  <footer>
    <div class="thumbInfo">
      <div class="infoWrap">
        共10页
      </div>
      <div class="infoWrap">
        当前第1页
      </div>
    </div>
  </footer>
  </div>
  </div>

<script type="text/html" id="printOrderList">
   <div id="page1">
  <div style="page-break-after:always">
    <header>
    <h3 class="title">万店联盟采购单</h3>
  </header>
  <section>
    <div class="thumbInfo">
      <div class="infoWrap">
        操作员：测试
      </div>
      <div class="infoWrap">
        单号：000001
      </div>
    </div>
    <table class="layui-table">
  <colgroup>
    
  </colgroup>
  <thead>
    <tr>
      <th>序号</th>
      <th>商品条码</th>
      <th>规格</th>
      <th>零售单位</th>
      <th>供应商</th>
      <th>单价</th>
      <th>数量</th>
      <th>总价</th>
    </tr> 
  </thead>
  <tbody>
    {{#  layui.each(d.lst,function(index, item){ }}
      <tr>
        <td>{{index+1}}</td>
        <td>{{item.barcode}}</td>
        <td>测试商品</td>
        <td>20ml/g</td>
        <td>{{item.supplier}}</td>
        <td>{{item.price}}</td>
        <td>{{item.unm}}</td>
        <td>{{item.price*item.unm}}</td>
      </tr>  
    {{#  }); }}
    
    
  </tbody>
  <tfoot>
    <tr>
      <td colspan="4">合计：<span class="printdposit"></span></td>
      <td colspan="4">合计：<span class="printdposit"></span></td>
    </tr>
  </tfoot>
</table>
  </section>
  <footer>
    <div class="thumbInfo">
      <div class="infoWrap">
        共10页
      </div>
      <div class="infoWrap">
        当前第1页
      </div>
    </div>
  </footer>

  </div>
  </div>
</script>

	
</body>



<script language="javascript">  
layui.use('laytpl',function(){
    laytpl = layui.laytpl;
    config.ajax('get',config.ajaxAddress.editOrderList,function(data){
    console.log(data);
    var tempHtml=printOrderList.innerHTML;
    // $('#printOrderWrapper').html('');
    var dposit=0;
    laytpl(tempHtml).render(data,function(html){
        $('body').append(html);
      });
    $('.printdposit').text(dposit+'元');
  },{id:'188'});
});






//打印代码  
   function Print()     
    {      
         var printStr = ""; 

        var content = "";  
  
        var str = document.getElementById('page1').innerHTML;     //获取需要打印的页面元素 ，page1元素设置样式page-break-after:always，意思是从下一行开始分割。  
        content = content + str;  
        str = document.getElementById('page2').innerHTML;     //获取需要打印的页面元素  
        content = content + str;  
          
        printStr = printStr+content;                                                
        /*var pwin=window.open("Print.htm","print"); //如果是本地测试，需要先新建Print.htm，如果是在域中使用，则不需要  
        pwin.document.write(printStr);  
        pwin.document.close();                   //这句很重要，没有就无法实现    
        pwin.print(); */   
        document.body.innerHTML=printStr;
        window.print();  
    }  
</script> 
</html>