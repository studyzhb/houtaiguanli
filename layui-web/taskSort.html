<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<title>标题</title>
	<meta name="keywords" content="">
	<meta name="description" content="">
  <meta http-equiv="pragma" content="no-cache"> 
  <meta http-equiv="Cache-Control" content="no-cache, must-revalidate"> 
  <meta http-equiv="expires" content="Wed, 26 Feb 1997 08:21:57 GMT">
	<link rel="stylesheet" href="./layui/css/layui.css" />
  	<link rel="stylesheet" href="./css/alertcon.css" />
	<script src="./layui/layui.js"></script>
    <script type="text/javascript" src="./js/jquery-2.2.3.min.js"></script>
    
  	
</head>
<body>

  <script type="text/plain" id="j_ueditorupload" style="height:5px;display:none;" ></script>
	<!-- 框架结构	 -->
	<div class="layui-layout layui-layout-admin">
  <div class="layui-header header header-demo">
    <a class="logo" href="#">
        <img src="./img/logo.png" alt="万店联盟">
    </a>
    <div class="user-action" style="position:absolute;right:15px;top:25px;">
      <a style="color: #e2e2e2;padding: 0 10px;" href="#" class="username">demo</a>
      <a style="color: #e2e2e2;padding: 0 10px;" href="#" class="quit">退出</a> 
    </div>
  </div>
  <div class="layui-side layui-bg-black">
    <div class="layui-side-scroll">
      
        <ul class="layui-nav layui-nav-tree" id="sliderPage" lay-filter="test">
<!-- 侧边导航: <ul class="layui-nav layui-nav-tree layui-nav-side"> -->
  
</ul>

    </div>
  </div>
	
	<!-- <div class="layui-tab layui-tab-brief" lay-filter="demoTitle">
	    <ul class="layui-tab-title site-demo-title">
	      <li class="layui-this">预览</li>
	      <li>查看代码</li>
	      <li>帮助</li>
	    </ul>
    	<div class="layui-body layui-tab-content site-demo site-demo-body">    
	      <div class="layui-tab-item layui-show">
	        <div class="layui-main">

	        </div>
		</div>
		</div>
	</div> -->
	<!-- ============================主要内容区================================ -->
  

        





	<div class="lay-main">
	  <!-- <span class="layui-breadcrumb">
		  <a href="#">首页</a>
		  <a href="#">组织机构</a>
		  <a href="#">组织机构管理</a>
		  <a><cite>正文</cite></a>
		</span>
     -->
     <div class="layui-tab layui-tab-brief" lay-filter="demoTitle">
       <ul class="layui-tab-title">
          <li class="layui-this">
            分类信息
          </li>
          
        </ul>

        <div class="layui-content">
          <div class="layui-tab-item layui-show" style="padding-top:20px;">
            <form class="layui-form layui-form-pane" style="display:inline-block;">
                
                <div class="layui-btn addArea">
                    添加分类类型
                </div>
                <div class="layui-btn" onclick="location.reload()">
                    刷新
                </div>
            </form>
          <table class="layui-table">
          <colgroup>
            <col width="100">
            <col >
            
            <col width="100">
            <col>

          </colgroup>
          <thead>
            <tr>
              <th>ID</th>
              <th>名称</th>
              <th>类型</th>
              <th>状态</th>
              <th>操作</th>
            </tr> 
          </thead>
          <tbody id="all-sort-list">

          </tbody>
      </table>
     

          </div>
        </div>


     </div>




    
    </div> 
  <ul id="biuuu_city_list"></ul>

<!--添加类型-->
<form class="layui-form layui-form-pane" id="authorForm" method="POST" action="" style="display: none;font-size: 14px;padding:10px;"> <!-- 提示：如果你不想用form，你可以换成div等任何一个普通元素 -->
    
    <div class="layui-form-item">
    <label class="layui-form-label">分类类型</label>
    <div class="layui-input-block">
        
        <input type="text" placeholder="请输入" name="name" autocomplete="off" class="layui-input">
        <input type="hidden" placeholder="请输入" name="parentclass" value="0" class="layui-input">
  
    </div>
    </div>
    <div class="layui-form-item">
      <label class="layui-form-label">类别图标</label>
      <div class="layui-input-block" style="padding-left:20px;">
        <img class="sfz imageadd" src="" alt="" width="50" height="50">
        
        <input type="hidden" name="pic" placeholder="请输入" autocomplete="off" class="layui-input">
        
      </div>
    </div>
    <div class="layui-form-item">
      <label class="layui-form-label">类型</label>
      <div class="layui-input-block">
        <select class="" name="type" lay-filter="sortFilter">
          <option value="1" selected="">商品</option>
          <option value="2">发布服务</option>
          <option value="3">求助服务</option>
        </select>
      </div>
    </div>
    <div class="layui-form-item">
    <div class="layui-input-block">
        <div class="layui-btn" lay-submit lay-filter="shopInfo">立即提交</div>
    </div>
    </div>
    
</form>

<!--添加类型内容-->
<form class="layui-form layui-form-pane" id="authorConForm" method="POST" action="" style="display: none;font-size: 14px;padding:10px;"> <!-- 提示：如果你不想用form，你可以换成div等任何一个普通元素 -->
    
    <div class="layui-form-item">
    <label class="layui-form-label">分类类型</label>
    <div class="layui-input-block">
        
        <input type="text" placeholder="请输入" name="name" autocomplete="off" class="layui-input">

    </div>
    </div>
    <div class="layui-form-item">
      <label class="layui-form-label">类别图标</label>
      <div class="layui-input-block" style="padding-left:20px;">
        <img class="sfz imageadd" src="" alt="" width="50" height="50">
        
        <input type="hidden" name="pic" placeholder="请输入" autocomplete="off" class="layui-input sfzinput">
        <input type="hidden" name="type" value="" class="parTypeId">
        <input type="hidden" name="parentclass" value="" class="parClassId">
      </div>
    </div>
    <div class="layui-form-item">
    <div class="layui-input-block">
        <div class="layui-btn" lay-submit lay-filter="subInfo">立即提交</div>
    </div>
    </div>
    
</form>

<!--编辑类型-->
<form class="layui-form layui-form-pane" id="editorForm" method="POST" action="" style="display: none;font-size: 14px;padding:10px;"> <!-- 提示：如果你不想用form，你可以换成div等任何一个普通元素 -->
    
    <div id="authorList">
                
              </div>
    
    <div class="layui-form-item">
    <div class="layui-input-block">
        <div class="layui-btn" lay-submit lay-filter="editorForm">立即提交</div>
    </div>
    </div>
    
</form>

<!--编辑zilei类型-->
<form class="layui-form layui-form-pane" id="editorSubForm" method="POST" action="" style="display: none;font-size: 14px;padding:10px;"> <!-- 提示：如果你不想用form，你可以换成div等任何一个普通元素 -->
    <div id="authorSubList">
                
              </div>
    <div class="layui-form-item">
    <div class="layui-input-block">
        <div class="layui-btn" lay-submit lay-filter="editorSubForm">立即提交</div>
    </div>
    </div>
    
</form>



  <!-- =======================弹出窗========================= -->
<script type="text/template" class="editSortPic">
  

  <div class="layui-form-item">
    <label class="layui-form-label">名称</label>
    <div class="layui-input-block">
        
        <input type="text" placeholder="请输入" value="{{=d.name}}" name="name" autocomplete="off" class="layui-input">
        <input type="hidden" placeholder="请输入" value="{{=d.id}}" name="id" autocomplete="off" class="layui-input">
        
  
    </div>
    </div>
    {{# if(d.tagType){ }}
    <div class="layui-form-item">
    <label class="layui-form-label">所属</label>
    <div class="layui-input-block">
      <select class="" name="parentclass" lay-filter="sortFilter">
        {{# layui.each(d.sortData,function(index,item){ }}

            {{# if(d.pId==item.id){ }}
              <option value="{{item.id}}" selected>{{item.name}}</option>  
            {{# }else{ }}
                <option value="{{item.id}}">{{item.name}}</option>
            {{# } }}
            
        {{# }) }}
      </select>
    </div>
  </div>
  {{# } }}


  <div class="layui-form-item">
    <label class="layui-form-label">类别图标</label>
    <div class="layui-input-block" style="padding-left:20px;">
      <img class="sfz imageadd" src="{{d.pic}}" alt="" width="50" height="50">
      
      <input type="hidden" name="pic" value="{{=d.pic}}" placeholder="请输入" autocomplete="off" class="layui-input sfzinput">
      
    </div>
  </div>
  {{# if(d.type){ }}
    <div class="layui-form-item">
    <label class="layui-form-label">类型</label>
    <div class="layui-input-block">
      <select class="" name="type" lay-filter="sortFilter">
        {{# if(d.type=='1'){ }}
          <option value="1" selected="">商品</option>
          <option value="2">发布服务</option>
          <option value="3">求助服务</option>
        {{# }else if(d.type=='2'){ }}
          <option value="1">商品</option>
        <option value="2" selected>发布服务</option>
        <option value="3">求助服务</option>
        {{# }else if(d.type=='3'){ }}
          <option value="1" >商品</option>
        <option value="2">发布服务</option>
        <option value="3" selected>求助服务</option>
        {{# }else{ }}
          <option value="1" >商品</option>
        <option value="2">发布服务</option>
        <option value="3" >求助服务</option>
        {{# } }}
      </select>
    </div>
  </div>
  {{# } }}


</script>

<!-- ========================================================= -->
<script id="slider" type="text/html">
  <li class="layui-nav-item layui-nav-itemed">
    <a href="javascript:;">{{d.name}}</a>
    <dl class="layui-nav-child">
    {{#  layui.each(d.children,function(index, item){ }}
      {{# if(d.thisselc.indexOf(item.path)>-1){ }}
      <dd class="layui-this">
        <a href="{{item.path}}">{{item.name}}</a>
      </dd>
      {{# }else{ }}
        <dd>
          <a href="{{item.path}}">{{item.name}}</a>
        </dd>
      {{# } }}
    {{#  }); }}
      
    </dl>
  </li>
</script>
	
<script id="sortContent" type="text/html">
  <tr>
    <td>{{d.index+1}}</td>
    <td>{{d.name}}</td>
    <td>
    {{# if(d.type=='1'){ }}
      商品
    {{# }else if(d.type=='2'){ }}
      发布服务
    {{# }else if(d.type=='3'){ }}
      求助服务
    {{# } }}
    </td>
    <td>
    {{# if(d.status=='1'){ }}
        <button class="layui-btn layui-btn-small layui-btn-primary icon-btn active" data-status='0' data-id="{{d.id}}">
              启用
        </button>
      {{# }else{ }}
        <button class="layui-btn layui-btn-small layui-btn-primary icon-btn" data-status="1" data-id="{{d.id}}">
              停用
        </button>
      {{# } }}
    </td>
    <td>
      <button class="layui-btn layui-btn-small layui-btn-primary addAreaCon" data-type="{{d.type}}" data-id="{{d.id}}">
            添加
        </button>
      <div class="layui-btn layui-btn-warm layui-btn-small editor-brand" data-type="{{d.type}}" data-id="{{d.id}}" data-name="{{d.name}}" >编辑</div>
      
    </td>
  </tr>
  {{#  layui.each(d.subclass,function(index, item){ }}
      <tr>
        <td>{{d.index+1}}-{{index+1}}</td>
        <td>| ---- {{item.name}}</td>
        <td></td>
          <td>
          {{# if(d.status=='1'){ }}
              <button class="layui-btn layui-btn-small layui-btn-primary icon-sub-btn" data-status='0' data-id="{{item.id}}">
                    启用
              </button>
            {{# }else{ }}
              <button class="layui-btn layui-btn-small layui-btn-primary icon-sub-btn" data-status="1" data-id="{{item.id}}">
                    停用
              </button>
            {{# } }}
          </td>
        <td>
          
          <div class="layui-btn layui-btn-warm layui-btn-small editor-sub-sort" data-pid='{{d.id}}' data-id="{{item.id}}" data-name="{{item.name}}">编辑</div>
          <button class="layui-btn layui-btn-small layui-btn-danger" data-id="{{item.id}}">
            删除
        </button>
        </td>
      </tr>
    {{#  }); }}
    
    
</script>

</div>

</body>
<script type="text/javascript" src="./js/config.js"></script>
<script type="text/javascript" src="./js/filter.js"></script>
<script src="/shop/shop/public/utf8-php/ueditor.config.js"></script>
<script src="/shop/shop/public/utf8-php/ueditor.all.min.js"></script>
<script type="text/javascript" src="./js/taskSort.js?v=2"></script>
<script>
  var ImageWrapper={
  temp:'',
  btap:true,
  obj:'',
  imgArr:[],
  suolveImg:[],
  detailImg:[]
};
  //实例化编辑器
  
      var o_ueditorupload = UE.getEditor('j_ueditorupload',
      {
        autoHeightEnabled:false
      });
      o_ueditorupload.ready(function ()
      {
     
    o_ueditorupload.hide();//隐藏编辑器
     
    //监听图片上传
    o_ueditorupload.addListener('beforeInsertImage', function (t,arg)
    {
        ImageWrapper.imgArr.length=0;
        
        $(ImageWrapper.obj).attr('src',arg[0].src);
        $(ImageWrapper.obj).next('input').val(arg[0].src);
        if(ImageWrapper.btap){
          $('.sfz').attr('src',arg[0].src);
          $('.sfzinput').val(arg[0].src);
        }else{
          $('.sfzc').attr('src',arg[0].src);
          $('.sfzinputc').val(arg[0].src);
        }

        // console.log(ImageWrapper.imgArr);
        // $()
          // console.log('这是图片地址：'+arg[0].src+'test111'+arg[1].src);
    });


     
    /* 文件上传监听
     * 需要在ueditor.all.min.js文件中找到
     * d.execCommand("insertHtml",l)
     * 之后插入d.fireEvent('afterUpfile',b)
     */
        o_ueditorupload.addListener('afterUpfile', function (t, arg)
        {
          alert('这是文件地址：'+arg[0].url);
        });
      });
       
      //弹出图片上传的对话框
      function upImage(str)
      {
        ImageWrapper.temp=str;
        // console.log(str);

        var myImage = o_ueditorupload.getDialog("insertimage");
        myImage.open();
      }
      //弹出文件上传的对话框
      /*function upFiles()
      {
        //var myFiles = o_ueditorupload.getDialog("attachment");
        //myFiles.open();
      } */

      $('.imageaddc').on('click',function(){
          
          ImageWrapper.btap=false;
          ImageWrapper.obj=this;
          upImage('image-suolve');
        })

      $('.imageadd').on('click',function(){
          ImageWrapper.obj=this;
          ImageWrapper.btap=true;
          upImage('image-suolve');
        })

      $('#editorForm').on('click','.imageadd',function(){
        ImageWrapper.obj=this;
          ImageWrapper.btap=true;
          upImage('image-suolve');
      });
      $('#editorSubForm').on('click','.imageadd',function(){
        ImageWrapper.obj=this;
          ImageWrapper.btap=true;
          upImage('image-suolve');
      });
</script>
</html>