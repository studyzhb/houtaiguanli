<html>
<head>
    <meta charset="utf-8">
    <title>Title</title>
    <script src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.js"></script>
    <script type="text/javascript" src="js/jquery-form.js"></script>
</head>
<body>

<form action="" method="post" enctype="multipart/form-data" id="postForm">

    <input type="file" name="filename" value="">
    <!--<input type="text" name="userNumber" placeholder="userNumber">-->

    <input type="submit"  value="提交">
</form>

<!--<form id="uploadForm">-->
    <!--<p>指定文件名： <input type="text" name="filename" value=""/></p>-->
    <!--<p>上传文件： <input type="file" name="file"/></p>-->
    <!--<input type="button" value="上传" onclick="doUpload()"/>-->
<!--</form>-->
<script type="text/javascript">

    $(document).ready(function(){
        $('#postForm').ajaxForm({
            url: "http://192.168.0.202:8080/heche/main/uploadUserImg",
            dataType: 'json',
            data: $('#postForm').serialize(),
            success: processJson
        });
        function processJson(data){
//            alert(data.result);
            console.log(data.result)
        }
    });

   /* function doUpload() {
        $('#uploadForm').ajaxForm({
            url: "http://192.168.0.202:8080/heche/main/uploadUserImg",
            type: "POST",
            cache: false,
            processData: false,
            contentType: false,
            data: $('#postForm').serialize(),
            dataType: 'json',   //json
            success: function (data) {
                alert(data);
            },
            error: function (responseStr) {
                alert(responseStr);
            }
        });
    }*/
   /* function onsubmit() {
        $.ajax({
            url: "http://192.168.0.202:8080/heche/main/uploadUserImg",
            type: "POST",
            cache: false,
            processData: false,
            contentType: false,
            data: $('#postForm').serialize(),
            dataType: 'json',   //json
            success: function (data) {
              alert(data);
            },
            error: function (responseStr) {
                console.log("error");
            }
        });
    }
    function doUpload() {
        var formData = new FormData($("#uploadForm")[0]);
        $.ajax({
            url: 'http://192.168.0.202:8080/heche/main/uploadUserImg',
            type: 'POST',
            data: formData,
            async: false,
            cache: false,
            contentType: false,
            processData: false,
            beforeSend: function () {
                console.log("正在进行，请稍候");
            },
            success: function (responseStr) {
                if (responseStr.status === 0) {
                    console.log("成功" + responseStr);
                } else {
                    console.log("失败");
                }
            },
            error: function (responseStr) {
                console.log("error");
            }
        });
    }*/

</script>
</body>
</html>
